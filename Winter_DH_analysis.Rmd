---
title: "Winter_DH_Germination_barley_analysis"
author: "Karl Kunze"
date: "10/26/2020"
output: html_document
editor_options: 
  chunk_output_type: console
---
reading in files
```{r}
getwd()

TP1_half<-as.data.frame(read.csv("data/Winter_DH/TP1/DHtp1_full_F.csv",stringsAsFactors = FALSE))
TP2<-as.data.frame(read.csv("data/Winter_DH/TP2/DHtp2_all_F.csv",stringsAsFactors = FALSE))
TP3<-as.data.frame(read.csv("data/Winter_DH/TP3/DHtp3_all_F.csv",stringsAsFactors = FALSE))

str(TP1)
str(TP2)
str(TP3)
TP_all<-rbind(TP1_half,TP2,TP3)
```


```{r}
colnames(TP_all)
df<-TP_all
colnames(df)
Germ_traits=function(df){
  df$GE=apply(df[,8:13],1,function(x) {sum(as.numeric(x[1:3]))/sum(as.numeric(x[1:6]))})  #does not count dead kernels in total count
  #df$GC=apply(df[,6:10],1,function(x) {sum(as.numeric(x[1:4]))/sum(as.numeric(x[1:5]))}) #does count dead kernels
  df$GI=apply(df[,8:13],1, function(x) {(sum(as.numeric(x[1:3]))/(as.numeric(x[1])+2*as.numeric(x[2])+ 3*as.numeric(x[3])))*10})
  df$GIscale=apply(df[,c(13,14)],1, function(x) {as.numeric(x[1])*as.numeric(x[2])}) #GI*GE
  df$GE_5D=apply(df[,8:13],1,function(x) {sum(as.numeric(x[1:5]))/sum(as.numeric(x[1:6]))})
  df$PM=as.factor(df$PM_at_plating)
 
  df$replication=as.factor(df$replication)
  df$Timepoint=as.factor(df$Timepoint)
  df
}
TPall=Germ_traits(TP_all)
colnames(TPall)


save(TPall, file="WMB DH 2020 all data for analysis.RData")

```